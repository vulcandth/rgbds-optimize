pack: core

builtins:
  no_op_ld:
    steps:
      - regex: '^ld ([abcdehl]), \1$'
  no_op_add_sub:
    steps:
      - regex: '^(?:add|sub) (?:a, )?(?:[%\$&]?0+|FALSE)$'
  ld_a_from_hli:
    steps:
      - regex: '^ld a, \[hl[+i]\]'

patterns:
  - name: "No-op ld"
    builtin: "no_op_ld"
  - name: "No-op add|sub"
    builtin: "no_op_add_sub"
  - name: "Load a from [hli]/[hl+]"
    builtin: "ld_a_from_hli"
